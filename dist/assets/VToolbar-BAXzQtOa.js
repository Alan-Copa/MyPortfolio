var ve=Object.defineProperty;var te=t=>{throw TypeError(t)};var we=(t,e,n)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R=(t,e,n)=>we(t,typeof e!="symbol"?e+"":e,n),W=(t,e,n)=>e.has(t)||te("Cannot "+n);var s=(t,e,n)=>(W(t,e,"read from private field"),n?n.call(t):e.get(t)),_=(t,e,n)=>e.has(t)?te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,a)=>(W(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),c=(t,e,n)=>(W(t,e,"access private method"),n);import{a as be,d as ye,b as N,c as T,g as le,e as xe,t as Te,f as Se,h as D,m as ne,B as H}from"./provider-browser-BGWRbpWu.js";import{r as E,C as ke,a2 as A,o as ae,l as ie,n as P,i as h,y as L,z as Be,p as ue,m as ce,b as de,g as me,h as ge,c as Ie,t as Ne,d as Ve,M as pe,s as _e,e as se,O as Ce,j as F}from"./index-CNYEUH6t.js";import{a as Ue}from"./axios-DXsv3KKR.js";import{V as Ae,u as Fe}from"./VIcon-Bk87GfOb.js";import{V as oe,m as Me,u as Re}from"./VBtn-DtYrLTy0.js";import{a as We}from"./index-CppdmPQc.js";import{m as Ee,a as Pe,u as Le,b as $e,V as $}from"./index-DhcTS2Wm.js";import{V as ze}from"./VAvatar-DzTDhtia.js";const De=BigInt(-1),b=BigInt(0),V=BigInt(1),He=BigInt(5),I={};let p="0000";for(;p.length<80;)p+=p;function k(t){let e=p;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function C(t,e,n){const a=BigInt(e.width);if(e.signed){const i=V<<a-V;T(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>b?t=D(ne(t,a),a):t=-D(ne(-t,a),a)}else{const i=V<<a;T(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-V}return t}function z(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,a=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const u=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);N(u,"invalid fixed format","format",t),e=u[1]!=="u",n=parseInt(u[2]),a=parseInt(u[3])}}else if(t){const u=t,d=(o,m,g)=>u[o]==null?g:(N(typeof u[o]===m,"invalid fixed format ("+o+" not "+m+")","format."+o,u[o]),u[o]);e=d("signed","boolean",e),n=d("width","number",n),a=d("decimals","number",a)}N(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),N(a<=80,"invalid FixedNumber decimals (too large)","format.decimals",a);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(a);return{signed:e,width:n,decimals:a,name:i}}function qe(t,e){let n="";t<b&&(n="-",t*=De);let a=t.toString();if(e===0)return n+a;for(;a.length<=e;)a=p+a;const i=a.length-e;for(a=a.substring(0,i)+"."+a.substring(i);a[0]==="0"&&a[1]!==".";)a=a.substring(1);for(;a[a.length-1]==="0"&&a[a.length-2]!==".";)a=a.substring(0,a.length-1);return n+a}var y,l,f,r,B,x,j,Z,G,J;const S=class S{constructor(e,n,a){_(this,r);R(this,"format");_(this,y);_(this,l);_(this,f);R(this,"_value");be(e,I,"FixedNumber"),U(this,l,n),U(this,y,a);const i=qe(n,a.decimals);ye(this,{format:a.name,_value:i}),U(this,f,k(a.decimals))}get signed(){return s(this,y).signed}get width(){return s(this,y).width}get decimals(){return s(this,y).decimals}get value(){return s(this,l)}addUnsafe(e){return c(this,r,j).call(this,e)}add(e){return c(this,r,j).call(this,e,"add")}subUnsafe(e){return c(this,r,Z).call(this,e)}sub(e){return c(this,r,Z).call(this,e,"sub")}mulUnsafe(e){return c(this,r,G).call(this,e)}mul(e){return c(this,r,G).call(this,e,"mul")}mulSignal(e){c(this,r,B).call(this,e);const n=s(this,l)*s(e,l);return T(n%s(this,f)===b,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),c(this,r,x).call(this,n/s(this,f),"mulSignal")}divUnsafe(e){return c(this,r,J).call(this,e)}div(e){return c(this,r,J).call(this,e,"div")}divSignal(e){T(s(e,l)!==b,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),c(this,r,B).call(this,e);const n=s(this,l)*s(this,f);return T(n%s(e,l)===b,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),c(this,r,x).call(this,n/s(e,l),"divSignal")}cmp(e){let n=this.value,a=e.value;const i=this.decimals-e.decimals;return i>0?a*=k(i):i<0&&(n*=k(-i)),n<a?-1:n>a?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=s(this,l);return s(this,l)<b&&(e-=s(this,f)-V),e=s(this,l)/s(this,f)*s(this,f),c(this,r,x).call(this,e,"floor")}ceiling(){let e=s(this,l);return s(this,l)>b&&(e+=s(this,f)-V),e=s(this,l)/s(this,f)*s(this,f),c(this,r,x).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,a=He*k(n-1);let i=this.value+a;const u=k(n);return i=i/u*u,C(i,s(this,y),"round"),new S(I,i,s(this,y))}isZero(){return s(this,l)===b}isNegative(){return s(this,l)<b}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return S.fromString(this.toString(),e)}static fromValue(e,n,a){const i=n==null?0:le(n),u=z(a);let d=xe(e,"value");const o=i-u.decimals;if(o>0){const m=k(o);T(d%m===b,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),d/=m}else o<0&&(d*=k(-o));return C(d,u,"fromValue"),new S(I,d,u)}static fromString(e,n){const a=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);N(a&&a[2].length+a[3].length>0,"invalid FixedNumber string value","value",e);const i=z(n);let u=a[2]||"0",d=a[3]||"";for(;d.length<i.decimals;)d+=p;T(d.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),d=d.substring(0,i.decimals);const o=BigInt(a[1]+u+d);return C(o,i,"fromString"),new S(I,o,i)}static fromBytes(e,n){let a=Te(Se(e,"value"));const i=z(n);return i.signed&&(a=D(a,i.width)),C(a,i,"fromBytes"),new S(I,a,i)}};y=new WeakMap,l=new WeakMap,f=new WeakMap,r=new WeakSet,B=function(e){N(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},x=function(e,n){return e=C(e,s(this,y),n),new S(I,e,s(this,y))},j=function(e,n){return c(this,r,B).call(this,e),c(this,r,x).call(this,s(this,l)+s(e,l),n)},Z=function(e,n){return c(this,r,B).call(this,e),c(this,r,x).call(this,s(this,l)-s(e,l),n)},G=function(e,n){return c(this,r,B).call(this,e),c(this,r,x).call(this,s(this,l)*s(e,l)/s(this,f),n)},J=function(e,n){return T(s(e,l)!==b,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),c(this,r,B).call(this,e),c(this,r,x).call(this,s(this,l)*s(this,f)/s(e,l),n)};let q=S;function je(t,e){let n=18;return n=le(e,"unit"),q.fromValue(t,n,{decimals:n,width:512}).toString()}function re(t){return je(t,18)}function Ze(){const t=E(null),e=E("0.00"),n=E(null),a=o=>`${o.slice(0,6)}...${o.slice(-4)}`;async function i(){const o=await window.ethereum.request({method:"eth_requestAccounts"});return t.value=o[0],console.log("connected wallet address:",t.value),t.value}const u=async()=>{if(!window.ethereum){alert("metamask is not installed. please install it to use this feature.");return}try{await i();const o=new H(window.ethereum),m=await o.getBalance(t.value);e.value=re(m);const g=await o.getNetwork();n.value=g.name,console.log("initialized ethers.js. network:",g.name,"balance:",e.value),localStorage.setItem("connectedWallet",t.value)}catch(o){console.error("failed to connect wallet:",o)}window.location.reload()},d=()=>{t.value=null,e.value="0.00",n.value=null,localStorage.removeItem("connectedWallet"),window.location.reload()};return ke(async()=>{if(!window.ethereum)return;const o=localStorage.getItem("connectedWallet");if(o)try{const m=await window.ethereum.request({method:"eth_accounts"});if(m&&m.length>0&&m.includes(o)){t.value=o;const g=new H(window.ethereum),v=await g.getBalance(t.value);e.value=re(v);const w=await g.getNetwork();n.value=w.name,console.log("restored wallet:",t.value,"network:",w.name,"balance:",e.value)}else localStorage.removeItem("connectedWallet")}catch(m){console.error("failed to restore wallet:",m),localStorage.removeItem("connectedWallet")}}),{getWalletAddress:i,walletAddress:t,walletBalance:e,networkName:n,connectWallet:u,disconnectWallet:d,truncateAddress:a}}const ot={__name:"LoginWithMetaMask",setup(t){const{getWalletAddress:e,walletAddress:n,connectWallet:a,disconnectWallet:i,truncateAddress:u}=Ze();async function d(){const g=await new H(window.ethereum).getSigner(),v="Login to TrustTheProcess - "+new Date().getTime()+" - confirm to connect your wallet and login",w=await g.signMessage(v);return{message:v,signature:w}}async function o(){const{message:m,signature:g}=await d();try{const v=await e(),w=await Ue.post("http://localhost:5001/user/login",{walletAddress:v,message:m,signature:g});console.log("message:",m),w.data.success?a():console.error("login failed",w.data.message)}catch(v){console.error("error logging in:",v)}}return(m,g)=>A(n)?(ae(),ie(oe,{key:1,onClick:A(i)},{default:P(()=>[L(" Connected: "+Be(A(u)(A(n))),1)]),_:1},8,["onClick"])):(ae(),ie(oe,{key:0,color:"primary",onClick:o},{default:P(()=>[h(Ae,null,{default:P(()=>g[0]||(g[0]=[L("mdi-wallet")])),_:1}),g[1]||(g[1]=L(" Login with MetaMask "))]),_:1}))}},Ge=ue({text:String,...ce(),...de()},"VToolbarTitle"),Je=me()({name:"VToolbarTitle",props:Ge(),setup(t,e){let{slots:n}=e;return ge(()=>{const a=!!(n.default||n.text||t.text);return h(t.tag,{class:["v-toolbar-title",t.class],style:t.style},{default:()=>{var i;return[a&&h("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(i=n.default)==null?void 0:i.call(n)])]}})}),{}}}),Ke=[null,"prominent","default","comfortable","compact"],Qe=ue({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>Ke.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Me(),...ce(),...Ee(),...Pe(),...de({tag:"header"}),...Ie()},"VToolbar"),rt=me()({name:"VToolbar",props:Qe(),setup(t,e){var K;let{slots:n}=e;const{backgroundColorClasses:a,backgroundColorStyles:i}=Fe(Ne(t,"color")),{borderClasses:u}=Re(t),{elevationClasses:d}=Le(t),{roundedClasses:o}=$e(t),{themeClasses:m}=Ve(t),{rtlClasses:g}=pe(),v=_e(!!(t.extended||(K=n.extension)!=null&&K.call(n))),w=se(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),M=se(()=>v.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return Ce({VBtn:{variant:"text"}}),ge(()=>{var X;const he=!!(t.title||n.title),fe=!!(n.image||t.image),Q=(X=n.extension)==null?void 0:X.call(n);return v.value=!!(t.extended||Q),h(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},a.value,u.value,d.value,o.value,m.value,g.value,t.class],style:[i.value,t.style]},{default:()=>[fe&&h("div",{key:"image",class:"v-toolbar__image"},[n.image?h($,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):h(ze,{key:"image-img",cover:!0,src:t.image},null)]),h($,{defaults:{VTabs:{height:F(w.value)}}},{default:()=>{var Y,O,ee;return[h("div",{class:"v-toolbar__content",style:{height:F(w.value)}},[n.prepend&&h("div",{class:"v-toolbar__prepend"},[(Y=n.prepend)==null?void 0:Y.call(n)]),he&&h(Je,{key:"title",text:t.title},{text:n.title}),(O=n.default)==null?void 0:O.call(n),n.append&&h("div",{class:"v-toolbar__append"},[(ee=n.append)==null?void 0:ee.call(n)])])]}}),h($,{defaults:{VTabs:{height:F(M.value)}}},{default:()=>[h(We,null,{default:()=>[v.value&&h("div",{class:"v-toolbar__extension",style:{height:F(M.value)}},[Q])]})]})]})}),{contentHeight:w,extensionHeight:M}}});export{rt as V,ot as _,Je as a,Qe as m,Ze as u};
