var E=Object.defineProperty;var R=(i,e,t)=>e in i?E(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>R(i,typeof e!="symbol"?e+"":e,t);import{C as b}from"./Crowdfunding-BTySxN_q.js";import{a as B}from"./axios-DXsv3KKR.js";import{p as S,m as A,g as N,r as g,h as _,i as o,aa as I,o as O,l as U,n as l,x as j,y as C}from"./index-CNYEUH6t.js";import{V as w,a as x}from"./VRow-Bwi6JHzR.js";import{V as T}from"./VGrid-Dr3IFcuU.js";import{V as H}from"./VIcon-Bk87GfOb.js";import{V as v}from"./VCol-CmV7wEDn.js";import{f as q,V as F}from"./VTextField-Ccocknsq.js";import{V as G}from"./VBtn-DtYrLTy0.js";import{m as J,c as M}from"./VInput-33aO0HeR.js";import{I as W,i as P,f as k,d as $,j as D,k as z,r as K,l as L,c as Q,n as X,b as Y,B as Z}from"./provider-browser-BGWRbpWu.js";import"./index-CppdmPQc.js";import"./index-DhcTS2Wm.js";class y{constructor(e,t,r){p(this,"interface");p(this,"bytecode");p(this,"runner");const n=W.from(e);t instanceof Uint8Array?t=P(k(t)):(typeof t=="object"&&(t=t.object),t.startsWith("0x")||(t="0x"+t),t=P(k(t))),$(this,{bytecode:t,interface:n,runner:r||null})}attach(e){return new D(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const r=this.interface.deploy;if(r.inputs.length+1===e.length&&(t=await z(e.pop())),r.inputs.length!==e.length)throw new Error("incorrect number of arguments to constructor");const n=await K(this.runner,r.inputs,e),u=L([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},t,{data:u})}async deploy(...e){const t=await this.getDeployTransaction(...e);Q(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(t),n=X(r);return new D(n,this.interface,this.runner,r)}connect(e){return new y(this.interface,this.bytecode,e)}static fromSolidity(e,t){Y(e!=null,"bad compiler output","output",e),typeof e=="string"&&(e=JSON.parse(e));const r=e.abi;let n="";return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}}const ee=S({...A(),...J()},"VForm"),te=N()({name:"VForm",props:ee(),emits:{"update:modelValue":i=>!0,submit:i=>!0},setup(i,e){let{slots:t,emit:r}=e;const n=M(i),u=g();function f(s){s.preventDefault(),n.reset()}function a(s){const d=s,c=n.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),r("submit",d),d.defaultPrevented||c.then(h=>{var V;let{valid:m}=h;m&&((V=u.value)==null||V.submit())}),d.preventDefault()}return _(()=>{var s;return o("form",{ref:u,class:["v-form",i.class],style:i.style,novalidate:!0,onReset:f,onSubmit:a},[(s=t.default)==null?void 0:s.call(t,n)])}),q(n,u)}}),he={__name:"index",setup(i){const e=I(),t=g(!1),r=g(""),n=g(""),u=async()=>{try{if(!window.ethereum){alert("Please install Metamask to use this feature!");return}const f=r.value.toString(),a=parseInt(n.value)*24*60*60,d=await new Z(window.ethereum).getSigner(),h=await new y(b.abi,b.bytecode,d).deploy(f,a);let m=await B.post("http://localhost:5001/new/crowdfunding",{target:h.target});console.log("response",m.data),console.log("Contract address saved to contracts-addresses.json file"),e.push(`/crowdfund-info/${m.data.address}`)}catch(f){console.error("Error creating crowdfunding campaign:",f),alert("Failed to create crowdfunding campaign. Check the console for details.")}};return(f,a)=>(O(),U(x,{class:"my-6 pa-4"},{default:l(()=>[o(x,{class:"header-container",fluid:""},{default:l(()=>[o(w,{align:"center"},{default:l(()=>[a[4]||(a[4]=j("h1",null,"New Crowdfund",-1)),o(T,{class:"mr-3",inset:"",vertical:""}),o(H,null,{default:l(()=>a[3]||(a[3]=[C("mdi-hand-heart")])),_:1}),o(T,{class:"ms-3",inset:"",vertical:""})]),_:1})]),_:1}),o(te,{ref:"form",modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=s=>t.value=s),class:"mt-6"},{default:l(()=>[o(w,null,{default:l(()=>[o(v,{cols:"12",md:"6"},{default:l(()=>[o(F,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=s=>r.value=s),label:"Campaign Goal (ETH)",type:"number",min:"0",required:"",hint:"Enter the goal amount in ETH"},null,8,["modelValue"])]),_:1}),o(v,{cols:"12",md:"6"},{default:l(()=>[o(F,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=s=>n.value=s),label:"Duration (Days)",type:"number",min:"1",required:"",hint:"Enter the campaign duration in days"},null,8,["modelValue"])]),_:1})]),_:1}),o(w,null,{default:l(()=>[o(v,{cols:"12",class:"text-center"},{default:l(()=>[o(G,{disabled:!t.value,color:"primary",onClick:u},{default:l(()=>a[5]||(a[5]=[C(" Create Crowdfunding Campaign ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{he as default};
