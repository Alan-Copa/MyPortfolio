var R=Object.defineProperty;var k=(i,e,t)=>e in i?R(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>k(i,typeof e!="symbol"?e+"":e,t);import{C as b}from"./Crowdfunding-BTySxN_q.js";import{a as B}from"./axios-DXsv3KKR.js";import{p as S,m as A,g as N,r as g,h as _,i as o,aa as I,o as O,l as U,n as l,x as j,y as C}from"./index-D9JmgYwh.js";import{V as w}from"./VRow-DyGKXBXd.js";import{V as x}from"./VGrid-CmlllyNm.js";import{V as H}from"./VIcon-CMl65gkx.js";import{V as T}from"./VContainer-JQ624Dq8.js";import{V as v}from"./VCol-BkGIiE89.js";import{f as q,V as F}from"./VTextField-DDLVEOe0.js";import{V as G}from"./VBtn-fgTSx9v7.js";import{m as J,c as M}from"./VInput-DfwIDuz6.js";import{I as W,h as P,g as D,d as $,a as E,c as z,r as K,b as L,e as Q,f as X,i as Y,B as Z}from"./provider-browser-DSVv9z_9.js";import"./index-DlhFhLAG.js";import"./index-P6xpYdXc.js";class y{constructor(e,t,n){p(this,"interface");p(this,"bytecode");p(this,"runner");const r=W.from(e);t instanceof Uint8Array?t=P(D(t)):(typeof t=="object"&&(t=t.object),t.startsWith("0x")||(t="0x"+t),t=P(D(t))),$(this,{bytecode:t,interface:r,runner:n||null})}attach(e){return new E(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const n=this.interface.deploy;if(n.inputs.length+1===e.length&&(t=await z(e.pop())),n.inputs.length!==e.length)throw new Error("incorrect number of arguments to constructor");const r=await K(this.runner,n.inputs,e),u=L([this.bytecode,this.interface.encodeDeploy(r)]);return Object.assign({},t,{data:u})}async deploy(...e){const t=await this.getDeployTransaction(...e);Q(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await this.runner.sendTransaction(t),r=X(n);return new E(r,this.interface,this.runner,n)}connect(e){return new y(this.interface,this.bytecode,e)}static fromSolidity(e,t){Y(e!=null,"bad compiler output","output",e),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let r="";return e.bytecode?r=e.bytecode:e.evm&&e.evm.bytecode&&(r=e.evm.bytecode),new this(n,r,t)}}const ee=S({...A(),...J()},"VForm"),te=N()({name:"VForm",props:ee(),emits:{"update:modelValue":i=>!0,submit:i=>!0},setup(i,e){let{slots:t,emit:n}=e;const r=M(i),u=g();function f(s){s.preventDefault(),r.reset()}function a(s){const d=s,c=r.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),n("submit",d),d.defaultPrevented||c.then(h=>{var V;let{valid:m}=h;m&&((V=u.value)==null||V.submit())}),d.preventDefault()}return _(()=>{var s;return o("form",{ref:u,class:["v-form",i.class],style:i.style,novalidate:!0,onReset:f,onSubmit:a},[(s=t.default)==null?void 0:s.call(t,r)])}),q(r,u)}}),we={__name:"index",setup(i){const e=I(),t=g(!1),n=g(""),r=g(""),u=async()=>{try{if(!window.ethereum){alert("Please install Metamask to use this feature!");return}const f=n.value.toString(),a=parseInt(r.value)*24*60*60,d=await new Z(window.ethereum).getSigner(),h=await new y(b.abi,b.bytecode,d).deploy(f,a);let m=await B.post("http://localhost:5001/new/crowdfunding",{target:h.target});console.log("response",m.data),console.log("Contract address saved to contracts-addresses.json file"),e.push(`/crowdfund-info/${m.data.address}`)}catch(f){console.error("Error creating crowdfunding campaign:",f),alert("Failed to create crowdfunding campaign. Check the console for details.")}};return(f,a)=>(O(),U(T,{class:"my-6 pa-4"},{default:l(()=>[o(T,{class:"header-container",fluid:""},{default:l(()=>[o(w,{align:"center"},{default:l(()=>[a[4]||(a[4]=j("h1",null,"New Crowdfund",-1)),o(x,{class:"mr-3",inset:"",vertical:""}),o(H,null,{default:l(()=>a[3]||(a[3]=[C("mdi-hand-heart")])),_:1}),o(x,{class:"ms-3",inset:"",vertical:""})]),_:1})]),_:1}),o(te,{ref:"form",modelValue:t.value,"onUpdate:modelValue":a[2]||(a[2]=s=>t.value=s),class:"mt-6"},{default:l(()=>[o(w,null,{default:l(()=>[o(v,{cols:"12",md:"6"},{default:l(()=>[o(F,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),label:"Campaign Goal (ETH)",type:"number",min:"0",required:"",hint:"Enter the goal amount in ETH"},null,8,["modelValue"])]),_:1}),o(v,{cols:"12",md:"6"},{default:l(()=>[o(F,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=s=>r.value=s),label:"Duration (Days)",type:"number",min:"1",required:"",hint:"Enter the campaign duration in days"},null,8,["modelValue"])]),_:1})]),_:1}),o(w,null,{default:l(()=>[o(v,{cols:"12",class:"text-center"},{default:l(()=>[o(G,{disabled:!t.value,color:"primary",onClick:u},{default:l(()=>a[5]||(a[5]=[C(" Create Crowdfunding Campaign ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{we as default};
